{"ast":null,"code":"import _classCallCheck from \"/Users/joga/Documents/Pooja/reddit-replica/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/joga/Documents/Pooja/reddit-replica/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/joga/Documents/Pooja/reddit-replica/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/joga/Documents/Pooja/reddit-replica/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/joga/Documents/Pooja/reddit-replica/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/joga/Documents/Pooja/reddit-replica/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/joga/Documents/Pooja/reddit-replica/src/containers/App.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { selectSubreddit, selectSort, fetchPostsIfNeeded, invalidateSubreddit } from '../actions/actions';\nimport Header from '../components/Header';\nimport Posts from '../containers/Posts';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.handleMenuChange = _this.handleMenuChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleRefreshClick = _this.handleRefreshClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: '/best',\n      selectedTabId: 1\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          dispatch = _this$props.dispatch,\n          selectedSubreddit = _this$props.selectedSubreddit;\n      dispatch(fetchPostsIfNeeded(selectedSubreddit));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$props2 = this.props,\n          dispatch = _this$props2.dispatch,\n          selectedSubreddit = _this$props2.selectedSubreddit;\n      console.log('selected subreddit: ' + selectedSubreddit);\n\n      window.onpopstate = function (e) {\n        window.location.reload();\n      };\n    }\n  }, {\n    key: \"handleMenuChange\",\n    value: function handleMenuChange(subreddit, sort) {\n      var sub = subreddit.replace(/ /g, '');\n      this.props.dispatch(selectSubreddit(sub));\n      this.props.dispatch(selectSort(sort));\n      this.props.dispatch(fetchPostsIfNeeded(sub, sort));\n    }\n  }, {\n    key: \"handleRefreshClick\",\n    value: function handleRefreshClick() {\n      var _this$props3 = this.props,\n          dispatch = _this$props3.dispatch,\n          selectedSubreddit = _this$props3.selectedSubreddit;\n      dispatch(invalidateSubreddit(selectedSubreddit));\n      dispatch(fetchPostsIfNeeded(selectedSubreddit));\n    }\n  }, {\n    key: \"updateNavigationState\",\n    value: function updateNavigationState(selectedTabId) {\n      this.setState({\n        selectedTabId: selectedTabId\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          selectedSubreddit = _this$props4.selectedSubreddit,\n          posts = _this$props4.posts,\n          isFetching = _this$props4.isFetching;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Header, {\n        selectedSub: selectedSubreddit,\n        handleMenuChange: this.handleMenuChange,\n        handleRefreshClick: this.handleRefreshClick,\n        selectedTabId: this.state.selectedTabId,\n        updateMainNavId: function updateMainNavId(id) {\n          return _this2.updateNavigationState(id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), posts.length > 0 && React.createElement(Posts, {\n        posts: posts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nfunction mapStateToProps(state) {\n  console.log(\"from mapstateprops\" + JSON.stringify(state));\n  var selectedSubreddit = state.selectedSubreddit,\n      postsBySubreddit = state.postsBySubreddit;\n\n  var _ref = postsBySubreddit[selectedSubreddit] || {\n    isFetching: true,\n    items: []\n  },\n      isFetching = _ref.isFetching,\n      posts = _ref.items;\n\n  return {\n    selectedSubreddit: selectedSubreddit,\n    posts: posts,\n    isFetching: isFetching\n  };\n}\n\nexport default connect(mapStateToProps)(App);","map":{"version":3,"sources":["/Users/joga/Documents/Pooja/reddit-replica/src/containers/App.js"],"names":["React","Component","connect","selectSubreddit","selectSort","fetchPostsIfNeeded","invalidateSubreddit","Header","Posts","App","props","handleMenuChange","bind","handleRefreshClick","state","selected","selectedTabId","dispatch","selectedSubreddit","console","log","window","onpopstate","e","location","reload","subreddit","sort","sub","replace","setState","posts","isFetching","id","updateNavigationState","length","mapStateToProps","JSON","stringify","postsBySubreddit","items"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport {\n    selectSubreddit,\n    selectSort,\n    fetchPostsIfNeeded,\n    invalidateSubreddit\n} from '../actions/actions'\n\nimport Header from '../components/Header'\nimport Posts from '../containers/Posts'\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n\n        this.handleMenuChange = this.handleMenuChange.bind(this)\n        this.handleRefreshClick = this.handleRefreshClick.bind(this)\n        this.state ={\n          selected: '/best',\n          selectedTabId: 1\n        }\n    }\n\n    componentDidMount() {\n        const { dispatch, selectedSubreddit } = this.props\n        dispatch(fetchPostsIfNeeded(selectedSubreddit))\n    }\n\n    componentDidUpdate(){\n      const { dispatch, selectedSubreddit } = this.props\n      console.log('selected subreddit: '+selectedSubreddit);\n      window.onpopstate  = (e) => {\n        window.location.reload();\n      }\n    }\n\n    handleMenuChange(subreddit,sort) {\n        const sub = subreddit.replace(/ /g, '')\n        this.props.dispatch(selectSubreddit(sub))\n        this.props.dispatch(selectSort(sort))\n        this.props.dispatch(fetchPostsIfNeeded(sub,sort))\n    }\n\n    handleRefreshClick() {\n        const { dispatch, selectedSubreddit } = this.props\n        dispatch(invalidateSubreddit(selectedSubreddit))\n        dispatch(fetchPostsIfNeeded(selectedSubreddit))\n    }\n    updateNavigationState(selectedTabId) {\n    this.setState({\n      selectedTabId: selectedTabId\n    });\n  }\n\n    render() {\n        const { selectedSubreddit, posts, isFetching } = this.props\n\n        return (\n            <div>\n                <Header selectedSub={selectedSubreddit}\n                    handleMenuChange={this.handleMenuChange}\n                    handleRefreshClick={this.handleRefreshClick}\n                    selectedTabId={this.state.selectedTabId}\n                    updateMainNavId={(id) => this.updateNavigationState(id)}\n                    />\n                {posts.length > 0 &&\n                    <Posts posts={posts} />\n                }\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n  console.log(\"from mapstateprops\"+ JSON.stringify(state));\n    const { selectedSubreddit, postsBySubreddit } = state\n    const { isFetching, items: posts } = postsBySubreddit[selectedSubreddit] || { isFetching: true, items: [] }\n\n    return {\n        selectedSubreddit,\n        posts,\n        isFetching\n    }\n}\n\nexport default connect(mapStateToProps)(App)\n"]},"metadata":{},"sourceType":"module"}